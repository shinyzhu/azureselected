(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{344:function(t,a,s){"use strict";s.r(a);var n=s(12),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"在logic-app中使用内联脚本获取最新的数组项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在logic-app中使用内联脚本获取最新的数组项"}},[t._v("#")]),t._v(" 在Logic App中使用内联脚本获取最新的数组项")]),t._v(" "),a("ContentMeta"),t._v(" "),a("p",[t._v("在我的"),a("a",{attrs:{href:"https://devkimchi.com/2019/11/06/getting-the-latest-array-item-in-logic-app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("上一篇文章"),a("OutboundLink")],1),t._v("中，通过组合使用"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-workflow-actions-triggers?WT.mc_id=devkimchicom-blog-juyoo#select-action",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Select")]),t._v("动作"),a("OutboundLink")],1),t._v("和"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-workflow-actions-triggers?WT.mc_id=devkimchicom-blog-juyoo#query-action",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Filter")]),t._v("动作"),a("OutboundLink")],1),t._v("，我们已经了解了如何使用"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-overview?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("Logic App"),a("OutboundLink")],1),t._v("工作流来获取一个数组中的最新的项。事实上，虽然这种做法是可行的，但它仅适用于一些特定的使用情况，对大多数情况来说，这个解决方案有点棘手。但是，有一个预览功能："),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-add-run-inline-code?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("内联 JavaScript 代码动作"),a("OutboundLink")],1),t._v("，可以方便地对数组排序。在这篇文章中，我将讨论如何使用"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-add-run-inline-code?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("内联 JavaScript 代码动作"),a("OutboundLink")],1),t._v("排序数组项，并获取 Logic App 工作流中的最新的项。")]),t._v(" "),a("h2",{attrs:{id:"集成账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集成账户"}},[t._v("#")]),t._v(" 集成账户")]),t._v(" "),a("p",[t._v("为了使用这个内联 JavaScript 代码动作，我们必须提供一个"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-enterprise-integration-create-integration-account?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("集成账户"),a("OutboundLink")],1),t._v("实例。集成帐户有"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-pricing?WT.mc_id=devkimchicom-blog-juyoo#integration-accounts",target:"_blank",rel:"noopener noreferrer"}},[t._v("三种定价层"),a("OutboundLink")],1),t._v(" - 免费、基本和标准。对于我们的例子来说，免费的已经足够了。")]),t._v(" "),a("p",[t._v("一旦提供了集成帐户实例，将其与现有的 Logic App 实例连接起来以使用动作。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://sa0blogs.blob.core.windows.net/devkimchi/2019/11/getting-the-latest-array-item-with-inline-script-in-logic-app-03.png",alt:"img"}})]),t._v(" "),a("h2",{attrs:{id:"javascript-支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#javascript-支持"}},[t._v("#")]),t._v(" JavaScript 支持")]),t._v(" "),a("p",[t._v("目前，该动作仅支持 node.js "),a("code",[t._v("8.11.1")]),t._v("的"),a("a",{attrs:{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects",target:"_blank",rel:"noopener noreferrer"}},[t._v("内置函数"),a("OutboundLink")],1),t._v("。我们无法通过"),a("code",[t._v("npm")]),t._v("导入外部库。因此，我们不能依赖于任何"),a("a",{attrs:{href:"https://nodejs.org/docs/latest-v8.x/api/modules.html#modules_require",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("require()")]),a("OutboundLink")],1),t._v("语句。所有内容"),a("strong",[t._v("必须")]),t._v("被包含在该动作中。")]),t._v(" "),a("h2",{attrs:{id:"内联-javascript-代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内联-javascript-代码"}},[t._v("#")]),t._v(" 内联 JavaScript 代码")]),t._v(" "),a("p",[t._v("让我们来看看下面的 JavaScript 代码。它不涉及 Logic App，只是纯 JavaScript 代码。如果您在 node.js 的控制台运行这段代码，它将返回"),a("code",[t._v("20191104.json")]),t._v("最新的文件路径值，这也是预期的值。 "),a("a",{attrs:{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/sort",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript 的数组排序功能"),a("OutboundLink")],1),t._v("需要一个单独的回调函数，其中包含排序逻辑。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" items "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20191101.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/20191101.json"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20191102.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/20191102.json"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20191103.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/20191103.json"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"20191104.json"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/path/20191104.json"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" sorted "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" items"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dateA "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dateB "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dateA is later than dateB: dateA gets the lower index.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dateA "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" dateB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dateA is older than dateB: dateB gets the lower index.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dateA "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" dateB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dateA and dateB is the same")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sorted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("回调函数"),a("strong",[t._v("应该")]),t._v("返回"),a("code",[t._v("-1")]),t._v("，"),a("code",[t._v("0")]),t._v("或"),a("code",[t._v("1")]),t._v("。")]),t._v(" "),a("ul",[a("li",[t._v("返回 "),a("code",[t._v("-1")]),t._v(" 表示，在数组元素 "),a("code",[t._v("a")]),t._v(" 和 "),a("code",[t._v("b")]),t._v(" 中，"),a("code",[t._v("a")]),t._v(" 会被排列到 "),a("code",[t._v("b")]),t._v(" 之前。")]),t._v(" "),a("li",[t._v("返回 "),a("code",[t._v("1")]),t._v(" 表示 "),a("code",[t._v("b")]),t._v(" 会被排列到 "),a("code",[t._v("a")]),t._v(" 之前。")])]),t._v(" "),a("p",[t._v("因此，回调函数把 "),a("code",[t._v("a")]),t._v(" 和 "),a("code",[t._v("b")]),t._v(" 的 "),a("code",[t._v("Name")]),t._v(" 属性值去掉 "),a("code",[t._v(".json")]),t._v("，将这两个值进行相互比较，较大的值位于数组项的上部位置（即较低的索引）。换句话说，数组项以降序进行排序。")]),t._v(" "),a("blockquote",[a("p",[t._v("如果你想知道更多有关排序的信息，请参考"),a("a",{attrs:{href:"https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Description",target:"_blank",rel:"noopener noreferrer"}},[t._v("此页面"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("p",[t._v("现在，让我们将这个代码应用到 Logic App。")]),t._v(" "),a("h2",{attrs:{id:"内联-javascript-代码动作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#内联-javascript-代码动作"}},[t._v("#")]),t._v(" 内联 JavaScript 代码动作")]),t._v(" "),a("p",[t._v("让我们添加一个"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-add-run-inline-code?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("内嵌JavaScript代码"),a("OutboundLink")],1),t._v("动作。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://sa0blogs.blob.core.windows.net/devkimchi/2019/11/getting-the-latest-array-item-with-inline-script-in-logic-app-01.png",alt:"img"}})]),t._v(" "),a("p",[t._v("然后进入动作的 JavaScript 代码。这几乎等同于上面的例子，但有两个地方有所不同。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Assign the array value from the output of the previous action, `List Backups`.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" items "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" workflowContext"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("actions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("List_Backups"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("outputs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" sorted "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" items"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sort")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dateA "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" dateB "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("replace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dateA "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" dateB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dateA "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" dateB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sorted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Returns the result as output.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("ul",[a("li",[t._v("该 "),a("code",[t._v("items")]),t._v(" 变量获取上一个操作——"),a("code",[t._v("List Backups")]),t._v("的输出值作为数组项。")]),t._v(" "),a("li",[t._v("在最后一行，它使用了 "),a("code",[t._v("return")]),t._v(" 语句把动作的结果发送到 "),a("code",[t._v("outputs")]),t._v(" 值。")])]),t._v(" "),a("p",[t._v("如果我们想引用这个动作的结果，这个工作流中的任何之后的动作都可以使用"),a("code",[t._v("outputs('ACTION_NAME')?['body']")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#比较"}},[t._v("#")]),t._v(" 比较")]),t._v(" "),a("p",[t._v("现在，我们只使用这种内联 Javascript 代码动作来解决排序问题。让我们来比较一下相同的结果，请参考"),a("a",{attrs:{href:"https://devkimchi.com/2019/11/06/getting-the-latest-array-item-in-logic-app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("上一篇文章"),a("OutboundLink")],1),t._v("与下面的图片。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://sa0blogs.blob.core.windows.net/devkimchi/2019/11/getting-the-latest-array-item-with-inline-script-in-logic-app-02.png",alt:"img"}})]),t._v(" "),a("p",[t._v("右侧是我们在"),a("a",{attrs:{href:"https://devkimchi.com/2019/11/06/getting-the-latest-array-item-in-logic-app/",target:"_blank",rel:"noopener noreferrer"}},[t._v("上一篇文章"),a("OutboundLink")],1),t._v("中创建的。至少我们"),a("strong",[t._v("应该")]),t._v("同时使用"),a("code",[t._v("从备份中选择文件名")]),t._v("动作（"),a("code",[t._v("Select")]),t._v("）和"),a("code",[t._v("获取最新备份")]),t._v("动作（"),a("code",[t._v("Filter")]),t._v("）。如果我们希望有一个更优雅的方式，需要在之前和之后有一些额外的动作。")]),t._v(" "),a("p",[t._v("另一方面，如果我们使用"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-add-run-inline-code?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("内联 JavaScript 代码动作"),a("OutboundLink")],1),t._v("，如左侧所示，我们只需要一个动作。")]),t._v(" "),a("p",[t._v("但有一点需要注意。我们必须有与使用该内联代码动作相关联的"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-enterprise-integration-create-integration-account?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("集成账户"),a("OutboundLink")],1),t._v("。集成账户的固定价格相当昂贵——"),a("a",{attrs:{href:"https://azure.microsoft.com/pricing/details/logic-apps/?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("US$ 302.4 (基本) and US$ 986.4 (标准) 每月"),a("OutboundLink")],1),t._v("。如果您的组织已经使用集成帐户，那没问题。然而，如果还没有，您"),a("strong",[t._v("应该")]),t._v("非常小心您的账单。")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("到目前为止，我们已经了解如何使用"),a("a",{attrs:{href:"https://docs.microsoft.com/azure/logic-apps/logic-apps-add-run-inline-code?WT.mc_id=devkimchicom-blog-juyoo",target:"_blank",rel:"noopener noreferrer"}},[t._v("内嵌 JavaScript 代码动作"),a("OutboundLink")],1),t._v("在 Logic App 工作流内排序数组项。它功能强大，但价格昂贵。因此，只有当您的组织能够负担成本时，再使用它。")])],1)}),[],!1,null,null,null);a.default=r.exports}}]);