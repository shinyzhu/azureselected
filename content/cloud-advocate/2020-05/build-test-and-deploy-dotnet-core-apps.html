<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Build, test, and deploy .NET Core apps | Azure Selected</title>
    <meta name="generator" content="VuePress 1.9.8">
    <link rel="icon" href="/azureselected/favicon.ico">
    <meta name="description" content="Use .NET Core to build apps with Azure Pipelines, Azure DevOps, &amp; Team Foundation Server">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/azureselected/assets/css/0.styles.fe1e9048.css" as="style"><link rel="preload" href="/azureselected/assets/js/app.8a0b7483.js" as="script"><link rel="preload" href="/azureselected/assets/js/2.8d021b4d.js" as="script"><link rel="preload" href="/azureselected/assets/js/33.ef0db925.js" as="script"><link rel="preload" href="/azureselected/assets/js/3.32c85e2e.js" as="script"><link rel="preload" href="/azureselected/assets/js/5.554b9b17.js" as="script"><link rel="prefetch" href="/azureselected/assets/js/10.fa73f6fc.js"><link rel="prefetch" href="/azureselected/assets/js/11.e07babbc.js"><link rel="prefetch" href="/azureselected/assets/js/12.12214fd4.js"><link rel="prefetch" href="/azureselected/assets/js/13.b7275e3f.js"><link rel="prefetch" href="/azureselected/assets/js/14.d6b8a728.js"><link rel="prefetch" href="/azureselected/assets/js/15.31a19f47.js"><link rel="prefetch" href="/azureselected/assets/js/16.c3ccb867.js"><link rel="prefetch" href="/azureselected/assets/js/17.7d290d04.js"><link rel="prefetch" href="/azureselected/assets/js/18.4cc5d13c.js"><link rel="prefetch" href="/azureselected/assets/js/19.01296b5f.js"><link rel="prefetch" href="/azureselected/assets/js/20.84db9ad2.js"><link rel="prefetch" href="/azureselected/assets/js/21.6a1d22b6.js"><link rel="prefetch" href="/azureselected/assets/js/22.b38195a7.js"><link rel="prefetch" href="/azureselected/assets/js/23.53dea98b.js"><link rel="prefetch" href="/azureselected/assets/js/24.67816702.js"><link rel="prefetch" href="/azureselected/assets/js/25.8e0307d1.js"><link rel="prefetch" href="/azureselected/assets/js/26.fb128a8f.js"><link rel="prefetch" href="/azureselected/assets/js/27.e8b0b7a9.js"><link rel="prefetch" href="/azureselected/assets/js/28.e625e9de.js"><link rel="prefetch" href="/azureselected/assets/js/29.aeb087ba.js"><link rel="prefetch" href="/azureselected/assets/js/30.8ef68534.js"><link rel="prefetch" href="/azureselected/assets/js/31.6b43ffde.js"><link rel="prefetch" href="/azureselected/assets/js/32.b2f60498.js"><link rel="prefetch" href="/azureselected/assets/js/34.c990c7e7.js"><link rel="prefetch" href="/azureselected/assets/js/35.177548dd.js"><link rel="prefetch" href="/azureselected/assets/js/36.be924c7e.js"><link rel="prefetch" href="/azureselected/assets/js/37.c4a329a3.js"><link rel="prefetch" href="/azureselected/assets/js/38.88502f70.js"><link rel="prefetch" href="/azureselected/assets/js/39.b70a599f.js"><link rel="prefetch" href="/azureselected/assets/js/4.f7cbda98.js"><link rel="prefetch" href="/azureselected/assets/js/40.af1f7c88.js"><link rel="prefetch" href="/azureselected/assets/js/41.09f3637f.js"><link rel="prefetch" href="/azureselected/assets/js/42.91268a34.js"><link rel="prefetch" href="/azureselected/assets/js/43.8bc4e597.js"><link rel="prefetch" href="/azureselected/assets/js/44.e75fe39d.js"><link rel="prefetch" href="/azureselected/assets/js/45.36f7e780.js"><link rel="prefetch" href="/azureselected/assets/js/46.d83d96f0.js"><link rel="prefetch" href="/azureselected/assets/js/47.b54cc2ca.js"><link rel="prefetch" href="/azureselected/assets/js/48.9b7655b1.js"><link rel="prefetch" href="/azureselected/assets/js/49.dc3e7585.js"><link rel="prefetch" href="/azureselected/assets/js/50.44491727.js"><link rel="prefetch" href="/azureselected/assets/js/51.b3cc832a.js"><link rel="prefetch" href="/azureselected/assets/js/52.4b3f7433.js"><link rel="prefetch" href="/azureselected/assets/js/53.d0efb5a8.js"><link rel="prefetch" href="/azureselected/assets/js/54.41189e23.js"><link rel="prefetch" href="/azureselected/assets/js/55.0604b61d.js"><link rel="prefetch" href="/azureselected/assets/js/56.d1bb56be.js"><link rel="prefetch" href="/azureselected/assets/js/57.2ae826e1.js"><link rel="prefetch" href="/azureselected/assets/js/58.fcca3b58.js"><link rel="prefetch" href="/azureselected/assets/js/59.3da7d882.js"><link rel="prefetch" href="/azureselected/assets/js/6.ef320c88.js"><link rel="prefetch" href="/azureselected/assets/js/60.3f06229c.js"><link rel="prefetch" href="/azureselected/assets/js/61.6e57367f.js"><link rel="prefetch" href="/azureselected/assets/js/62.3b222c6c.js"><link rel="prefetch" href="/azureselected/assets/js/63.8a7f0932.js"><link rel="prefetch" href="/azureselected/assets/js/7.51b986da.js"><link rel="prefetch" href="/azureselected/assets/js/8.a9358b51.js"><link rel="prefetch" href="/azureselected/assets/js/9.b8eed478.js">
    <link rel="stylesheet" href="/azureselected/assets/css/0.styles.fe1e9048.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/azureselected/" class="home-link router-link-active"><img src="/azureselected/img/logo_azure.svg" alt="Azure Selected" class="logo"> <span class="site-name can-hide">Azure Selected</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/azureselected/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/azureselected/content/" class="nav-link router-link-active">
  Content
</a></div><div class="nav-item"><a href="/azureselected/tags.html" class="nav-link">
  Tags
</a></div><div class="nav-item"><a href="https://wj.qq.com/s2/5227985/7213/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Join Us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/azureselected/zh-cn/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/azureselected/zh-tw/" class="nav-link">
  繁體中文
</a></li></ul></div></div> <a href="https://github.com/shinyzhu/azureselected" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/azureselected/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/azureselected/content/" class="nav-link router-link-active">
  Content
</a></div><div class="nav-item"><a href="/azureselected/tags.html" class="nav-link">
  Tags
</a></div><div class="nav-item"><a href="https://wj.qq.com/s2/5227985/7213/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Join Us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Language</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Language</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/azureselected/zh-cn/" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/azureselected/zh-tw/" class="nav-link">
  繁體中文
</a></li></ul></div></div> <a href="https://github.com/shinyzhu/azureselected" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Build, test, and deploy .NET Core apps</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#create-your-first-pipeline" class="sidebar-link">Create your first pipeline</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#get-the-code" class="sidebar-link">Get the code</a></li><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#sign-in-to-azure-pipelines" class="sidebar-link">Sign in to Azure Pipelines</a></li><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#create-the-pipeline" class="sidebar-link">Create the pipeline</a></li></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#build-environment" class="sidebar-link">Build environment</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#restore-dependencies" class="sidebar-link">Restore dependencies</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#build-your-project" class="sidebar-link">Build your project</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#run-your-tests" class="sidebar-link">Run your tests</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#collect-code-coverage" class="sidebar-link">Collect code coverage</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#collect-code-coverage-metrics-with-coverlet" class="sidebar-link">Collect code coverage metrics with Coverlet</a></li></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#package-and-deliver-your-code" class="sidebar-link">Package and deliver your code</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#publish-artifacts-to-azure-pipelines" class="sidebar-link">Publish artifacts to Azure Pipelines</a></li><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#publish-to-a-nuget-feed" class="sidebar-link">Publish to a NuGet feed</a></li><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#deploy-a-web-app" class="sidebar-link">Deploy a web app</a></li></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#build-an-image-and-push-to-container-registry" class="sidebar-link">Build an image and push to container registry</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#troubleshooting" class="sidebar-link">Troubleshooting</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#q-a" class="sidebar-link">Q&amp;A</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#where-can-i-learn-more-about-azure-artifacts-and-the-tfs-package-management-service" class="sidebar-link">Where can I learn more about Azure Artifacts and the TFS Package Management service?</a></li><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#where-can-i-learn-more-about-net-core-commands" class="sidebar-link">Where can I learn more about .NET Core commands?</a></li><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#where-can-i-learn-more-about-running-tests-in-my-solution" class="sidebar-link">Where can I learn more about running tests in my solution?</a></li><li class="sidebar-sub-header"><a href="/azureselected/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.html#where-can-i-learn-more-about-tasks" class="sidebar-link">Where can I learn more about tasks?</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="build-test-and-deploy-net-core-apps"><a href="#build-test-and-deploy-net-core-apps" class="header-anchor">#</a> Build, test, and deploy .NET Core apps</h1> <div class="content-meta"><hr> <p>From:  <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/ecosystems/dotnet-core">https://docs.microsoft.com/en-us/azure/devops/pipelines/ecosystems/dotnet-core</a></p> <p>By:  Abel Wang | 5/6/2020</p> <!----> <div class="tags-head"><span><a href="/azureselected/tags.html#Azure DevOps">
      Azure DevOps
    </a><a href="/azureselected/tags.html#.NET Core">
      .NET Core
    </a></span></div> <hr></div> <p>Use a pipeline to automatically build and test your .NET Core projects. Learn how to:</p> <ul><li>Set up your build environment with <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops" target="_blank" rel="noopener noreferrer">Microsoft-hosted<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/agents?view=azure-devops" target="_blank" rel="noopener noreferrer">self-hosted<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> agents.</li> <li>Restore dependencies, build your project, and test with the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops" target="_blank" rel="noopener noreferrer">.NET Core CLI task<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or a <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/scripts/cross-platform-scripting?view=azure-devops" target="_blank" rel="noopener noreferrer">script<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Use the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/test/publish-code-coverage-results?view=azure-devops" target="_blank" rel="noopener noreferrer">publish code coverage task<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to publish code coverage results.</li> <li>Package and deliver your code with the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops" target="_blank" rel="noopener noreferrer">.NET Core CLI task<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/publish-build-artifacts?view=azure-devops" target="_blank" rel="noopener noreferrer">publish build artifacts task<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Publish to a <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/artifacts/nuget?view=azure-devops" target="_blank" rel="noopener noreferrer">NuGet feed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li>Deploy your <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/targets/webapp?view=azure-devops" target="_blank" rel="noopener noreferrer">web app to Azure<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul> <blockquote><p>Note</p> <p>For help with .NET Framework projects, see <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/apps/aspnet/build-aspnet-4?view=azure-devops" target="_blank" rel="noopener noreferrer">Build ASP.NET apps with .NET Framework<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <h2 id="create-your-first-pipeline"><a href="#create-your-first-pipeline" class="header-anchor">#</a> Create your first pipeline</h2> <blockquote><p>Are you new to Azure Pipelines? If so, then we recommend you try this section before moving on to other sections.</p></blockquote> <h3 id="get-the-code"><a href="#get-the-code" class="header-anchor">#</a> Get the code</h3> <p>Fork this repo in GitHub:</p> <div class="language- extra-class"><pre class="language-text"><code>https://github.com/MicrosoftDocs/pipelines-dotnet-core
</code></pre></div><h3 id="sign-in-to-azure-pipelines"><a href="#sign-in-to-azure-pipelines" class="header-anchor">#</a> Sign in to Azure Pipelines</h3> <p>Sign in to <a href="https://azure.microsoft.com/services/devops/pipelines" target="_blank" rel="noopener noreferrer">Azure Pipelines<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. After you sign in, your browser goes to <code>https://dev.azure.com/my-organization-name</code> and displays your Azure DevOps dashboard.</p> <p>Within your selected organization, create a <em>project</em>. If you don't have any projects in your organization, you see a <strong>Create a project to get started</strong> screen. Otherwise, select the <strong>Create Project</strong> button in the upper-right corner of the dashboard.</p> <h3 id="create-the-pipeline"><a href="#create-the-pipeline" class="header-anchor">#</a> Create the pipeline</h3> <ol><li><p>Sign in to your Azure DevOps organization and navigate to your project.</p></li> <li><p>Go to <strong>Pipelines</strong>, and then select <strong>New Pipeline</strong>.</p></li> <li><p>Walk through the steps of the wizard by first selecting <strong>GitHub</strong> as the location of your source code.</p> <p><img src="https://docs.microsoft.com/en-us/azure/devops/pipelines/media/get-started-yaml/new-pipeline.png?view=azure-devops" alt="Select GitHub"></p> <blockquote><p>Note</p> <p>If this is not what you see, then <a href="https://docs.microsoft.com/en-us/azure/devops/project/navigation/preview-features?view=azure-devops" target="_blank" rel="noopener noreferrer">make sure the Multi-stage pipelines experience is turned on<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote></li> <li><p>You might be redirected to GitHub to sign in. If so, enter your GitHub credentials.</p></li> <li><p>When the list of repositories appears, select your repository.</p></li> <li><p>You might be redirected to GitHub to install the Azure Pipelines app. If so, select <strong>Approve and install</strong>.</p></li></ol> <blockquote><p>When the <strong>Configure</strong> tab appears, select <strong>ASP.NET Core</strong>.</p></blockquote> <ol><li><p>When your new pipeline appears, take a look at the YAML to see what it does. When you're ready, select <strong>Save and run</strong>.</p> <p><img src="https://docs.microsoft.com/en-us/azure/devops/pipelines/ecosystems/media/save-and-run-button-new-yaml-pipeline.png?view=azure-devops" alt="Save and run button in a new YAML pipeline"></p></li> <li><p>You're prompted to commit a new <em>azure-pipelines.yml</em> file to your repository. After you're happy with the message, select <strong>Save and run</strong> again.</p> <p>If you want to watch your pipeline in action, select the build job.</p> <blockquote><p>You just created and ran a pipeline that we automatically created for you, because your code appeared to be a good match for the <a href="https://github.com/Microsoft/azure-pipelines-yaml/blob/master/templates/asp.net-core.yml" target="_blank" rel="noopener noreferrer">ASP.NET Core<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> template.</p></blockquote> <p>You now have a working YAML pipeline (<code>azure-pipelines.yml</code>) in your repository that's ready for you to customize!</p></li> <li><p>When you're ready to make changes to your pipeline, select it in the <strong>Pipelines</strong> page, and then <strong>Edit</strong>the <code>azure-pipelines.yml</code> file.</p></li> <li><p>See the sections below to learn some of the more common ways to customize your pipeline.</p></li></ol> <h2 id="build-environment"><a href="#build-environment" class="header-anchor">#</a> Build environment</h2> <p>You can use Azure Pipelines to build your .NET Core projects on Windows, Linux, or macOS without needing to set up any infrastructure of your own. The <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops" target="_blank" rel="noopener noreferrer">Microsoft-hosted agents<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in Azure Pipelines have several released versions of the .NET Core SDKs preinstalled.</p> <p>Ubuntu 18.06 is set here in the YAML file.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">pool</span><span class="token punctuation">:</span>
  <span class="token key atrule">vmImage</span><span class="token punctuation">:</span> <span class="token string">'ubuntu-18.04'</span> <span class="token comment"># examples of other options: 'macOS-10.15', 'windows-2019'</span>
</code></pre></div><p>See <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops" target="_blank" rel="noopener noreferrer">Microsoft-hosted agents<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for a complete list of images and <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/yaml-schema#pool" target="_blank" rel="noopener noreferrer">Pool<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for further examples.</p> <p>The Microsoft-hosted agents don't include some of the older versions of the .NET Core SDK. They also don't typically include prerelease versions. If you need these kinds of SDKs on Microsoft-hosted agents, add the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/tool/dotnet-core-tool-installer?view=azure-devops" target="_blank" rel="noopener noreferrer">UseDotNet@2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> task to your YAML file.</p> <p>To install the preview version of the 5.0.x SDK for building and 3.0.x for running tests that target .NET Core 3.0.x, add this snippet:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> UseDotNet@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'5.0.x'</span>
    <span class="token key atrule">includePreviewVersions</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Required for preview versions</span>

<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> UseDotNet@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3.0.x'</span>
    <span class="token key atrule">packageType</span><span class="token punctuation">:</span> runtime
</code></pre></div><p>If you are installing on a Windows agent, it will already have a .NET Core runtime on it. To install a newer SDK, set <code>performMultiLevelLookup</code> to <code>true</code> in this snippet:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> UseDotNet@2
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> <span class="token string">'Install .NET Core SDK'</span>
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">version</span><span class="token punctuation">:</span> 5.0.x
    <span class="token key atrule">performMultiLevelLookup</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">includePreviewVersions</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Required for preview versions</span>
</code></pre></div><blockquote><p>Tip</p> <p>As an alternative, you can set up a <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/agents?view=azure-devops#install" target="_blank" rel="noopener noreferrer">self-hosted agent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and save the cost of running the tool installer. See <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/v2-linux?view=azure-devops" target="_blank" rel="noopener noreferrer">Linux<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/v2-osx?view=azure-devops" target="_blank" rel="noopener noreferrer">MacOS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, or <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/v2-windows?view=azure-devops" target="_blank" rel="noopener noreferrer">Windows<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. You can also use self-hosted agents to save additional time if you have a large repository or you run incremental builds. A self-hosted agent can also help you in using the preview or private SDKs thats are not officially supported by Azure DevOps or you have available on your corporate or on-premises environments only.</p></blockquote> <h2 id="restore-dependencies"><a href="#restore-dependencies" class="header-anchor">#</a> Restore dependencies</h2> <p>NuGet is a popular way to depend on code that you don't build. You can download NuGet packages and project-specific tools that are specified in the project file by running the <code>dotnet restore</code> command either through the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops" target="_blank" rel="noopener noreferrer">.NET Core<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> task or directly in a script in your pipeline.</p> <p>You can download NuGet packages from Azure Artifacts, NuGet.org, or some other external or internal NuGet repository. The <strong>.NET Core</strong> task is especially useful to restore packages from authenticated NuGet feeds.</p> <p>This pipeline uses an artifact feed for <code>dotnet restore</code> in the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/build/dotnet-core-cli?view=azure-devops" target="_blank" rel="noopener noreferrer">.NET Core CLI task<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">trigger</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> master

<span class="token key atrule">pool</span><span class="token punctuation">:</span>
  <span class="token key atrule">vmImage</span><span class="token punctuation">:</span> <span class="token string">'windows-latest'</span>

<span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">buildConfiguration</span><span class="token punctuation">:</span> <span class="token string">'Release'</span>

<span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'restore'</span>
    <span class="token key atrule">feedsToUse</span><span class="token punctuation">:</span> <span class="token string">'select'</span>
    <span class="token key atrule">vstsFeed</span><span class="token punctuation">:</span> <span class="token string">'my-vsts-feed'</span> <span class="token comment"># A series of numbers and letters</span>

<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'build'</span>
    <span class="token key atrule">arguments</span><span class="token punctuation">:</span> <span class="token string">'--configuration $(buildConfiguration)'</span>
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> <span class="token string">'dotnet build $(buildConfiguration)'</span>
</code></pre></div><p><code>dotnet restore</code> internally uses a version of <code>NuGet.exe</code> that is packaged with the .NET Core SDK. <code>dotnet restore</code> can only restore packages specified in the .NET Core project <code>.csproj</code> files. If you also have a Microsoft .NET Framework project in your solution or use <code>package.json</code> to specify your dependencies, you must also use the <strong>NuGet</strong> task to restore those dependencies.</p> <p>In .NET Core SDK version 2.0 and newer, packages are restored automatically when running other commands such as <code>dotnet build</code>. However, you might still need to use the <strong>.NET Core</strong> task to restore packages if you use an authenticated feed.</p> <p>If your builds occasionally fail when restoring packages from NuGet.org due to connection issues, you can use Azure Artifacts in conjunction with <a href="https://docs.microsoft.com/en-us/azure/devops/artifacts/concepts/upstream-sources?view=azure-devops" target="_blank" rel="noopener noreferrer">upstream sources<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and cache the packages. The credentials of the pipeline are automatically used when connecting to Azure Artifacts. These credentials are typically derived from the <strong>Project Collection Build Service</strong> account.</p> <p>If you want to specify a NuGet repository, put the URLs in a <code>NuGet.config</code> file in your repository. If your feed is authenticated, manage its credentials by creating a NuGet service connection in the <strong>Services</strong> tab under <strong>Project Settings</strong>.</p> <p>If you use Microsoft-hosted agents, you get a new machine every time your run a build, which means restoring the packages every time. This restoration can take a significant amount of time. To mitigate this issue, you can either use Azure Artifacts or a self-hosted agent, in which case, you get the benefit of using the package cache.</p> <p>To restore packages from an external custom feed, use the <strong>.NET Core</strong> task:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># do this before your build tasks</span>
<span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Restore
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> restore
    <span class="token key atrule">projects</span><span class="token punctuation">:</span> <span class="token string">'**/*.csproj'</span>
    <span class="token key atrule">feedsToUse</span><span class="token punctuation">:</span> config
    <span class="token key atrule">nugetConfigPath</span><span class="token punctuation">:</span> NuGet.config    <span class="token comment"># Relative to root of the repository</span>
    <span class="token key atrule">externalFeedCredentials</span><span class="token punctuation">:</span> &lt;Name of the NuGet service connection<span class="token punctuation">&gt;</span>
<span class="token comment"># ...</span>
</code></pre></div><p>For more information about NuGet service connections, see <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/artifacts/nuget?view=azure-devops" target="_blank" rel="noopener noreferrer">publish to NuGet feeds<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="build-your-project"><a href="#build-your-project" class="header-anchor">#</a> Build your project</h2> <p>You build your .NET Core project either by running the <code>dotnet build</code> command in your pipeline or by using the .NET Core task.</p> <p>To build your project by using the .NET Core task, add the following snippet to your <code>azure-pipelines.yml</code>file:</p> <p>YAMLCopy</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> Build
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> build
    <span class="token key atrule">projects</span><span class="token punctuation">:</span> <span class="token string">'**/*.csproj'</span>
    <span class="token key atrule">arguments</span><span class="token punctuation">:</span> <span class="token string">'--configuration $(buildConfiguration)'</span> <span class="token comment"># Update this to match your need</span>
</code></pre></div><p>You can run any custom dotnet command in your pipeline. The following example shows how to install and use a .NET global tool, <a href="https://www.nuget.org/packages/dotnetsay/" target="_blank" rel="noopener noreferrer">dotnetsay<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> <span class="token string">'Install dotnetsay'</span>
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> custom
    <span class="token key atrule">custom</span><span class="token punctuation">:</span> tool
    <span class="token key atrule">arguments</span><span class="token punctuation">:</span> <span class="token string">'install -g dotnetsay'</span>
</code></pre></div><h2 id="run-your-tests"><a href="#run-your-tests" class="header-anchor">#</a> Run your tests</h2> <p>If you have test projects in your repository, then use the <strong>.NET Core</strong> task to run unit tests by using testing frameworks like MSTest, xUnit, and NUnit. For this functionality, the test project must reference <a href="https://www.nuget.org/packages/Microsoft.NET.Test.SDK" target="_blank" rel="noopener noreferrer">Microsoft.NET.Test.SDK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> version 15.8.0 or higher. Test results are automatically published to the service. These results are then made available to you in the build summary and can be used for troubleshooting failed tests and test-timing analysis.</p> <p>Add the following snippet to your <code>azure-pipelines.yml</code> file:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token comment"># ...</span>
<span class="token comment"># do this after other tasks such as building</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> test
    <span class="token key atrule">projects</span><span class="token punctuation">:</span> <span class="token string">'**/*Tests/*.csproj'</span>
    <span class="token key atrule">arguments</span><span class="token punctuation">:</span> <span class="token string">'--configuration $(buildConfiguration)'</span>
</code></pre></div><p>An alternative is to run the <code>dotnet test</code> command with a specific logger and then use the <strong>Publish Test Results</strong> task:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token comment"># ...</span>
<span class="token comment"># do this after your tests have run</span>
<span class="token punctuation">-</span> <span class="token key atrule">script</span><span class="token punctuation">:</span> dotnet test &lt;test<span class="token punctuation">-</span>project<span class="token punctuation">&gt;</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>logger trx
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> PublishTestResults@2
  <span class="token key atrule">condition</span><span class="token punctuation">:</span> succeededOrFailed()
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">testRunner</span><span class="token punctuation">:</span> VSTest
    <span class="token key atrule">testResultsFiles</span><span class="token punctuation">:</span> <span class="token string">'**/*.trx'</span>
</code></pre></div><h2 id="collect-code-coverage"><a href="#collect-code-coverage" class="header-anchor">#</a> Collect code coverage</h2> <p>If you're building on the Windows platform, code coverage metrics can be collected by using the built-in coverage data collector. For this functionality, the test project must reference <a href="https://www.nuget.org/packages/Microsoft.NET.Test.SDK" target="_blank" rel="noopener noreferrer">Microsoft.NET.Test.SDK<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>version 15.8.0 or higher. If you use the <strong>.NET Core</strong> task to run tests, coverage data is automatically published to the server. The <strong>.coverage</strong> file can be downloaded from the build summary for viewing in Visual Studio.</p> <p>Add the following snippet to your <code>azure-pipelines.yml</code> file:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token comment"># ...</span>
<span class="token comment"># do this after other tasks such as building</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> test
    <span class="token key atrule">projects</span><span class="token punctuation">:</span> <span class="token string">'**/*Tests/*.csproj'</span>
    <span class="token key atrule">arguments</span><span class="token punctuation">:</span> <span class="token string">'--configuration $(buildConfiguration) --collect &quot;Code coverage&quot;'</span>
</code></pre></div><p>If you choose to run the <code>dotnet test</code> command, specify the test results logger and coverage options. Then use the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/test/publish-test-results?view=azure-devops" target="_blank" rel="noopener noreferrer">Publish Test Results<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> task:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token comment"># ...</span>
<span class="token comment"># do this after your tests have run</span>
<span class="token punctuation">-</span> <span class="token key atrule">script</span><span class="token punctuation">:</span> dotnet test &lt;test<span class="token punctuation">-</span>project<span class="token punctuation">&gt;</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>logger trx <span class="token punctuation">-</span><span class="token punctuation">-</span>collect &quot;Code coverage&quot;
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> PublishTestResults@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">testRunner</span><span class="token punctuation">:</span> VSTest
    <span class="token key atrule">testResultsFiles</span><span class="token punctuation">:</span> <span class="token string">'**/*.trx'</span>
</code></pre></div><h3 id="collect-code-coverage-metrics-with-coverlet"><a href="#collect-code-coverage-metrics-with-coverlet" class="header-anchor">#</a> Collect code coverage metrics with Coverlet</h3> <p>If you're building on Linux or macOS, you can use <a href="https://github.com/tonerdo/coverlet" target="_blank" rel="noopener noreferrer">Coverlet<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or a similar tool to collect code coverage metrics.</p> <p>Code coverage results can be published to the server by using the <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/test/publish-code-coverage-results?view=azure-devops" target="_blank" rel="noopener noreferrer">Publish Code Coverage Results<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> task. To leverage this functionality, the coverage tool must be configured to generate results in Cobertura or JaCoCo coverage format.</p> <p>To run tests and publish code coverage with Coverlet, add this snippet to your <code>azure-pipelines.yml</code> file:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> <span class="token string">'dotnet test'</span>
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token string">'test'</span>
    <span class="token key atrule">arguments</span><span class="token punctuation">:</span> <span class="token string">'--configuration $(buildConfiguration) /p:CollectCoverage=true /p:CoverletOutputFormat=cobertura /p:CoverletOutput=$(Build.SourcesDirectory)/TestResults/Coverage/'</span>
    <span class="token key atrule">publishTestResults</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">projects</span><span class="token punctuation">:</span> <span class="token string">'**/test-library/*.csproj'</span> <span class="token comment"># update with your test project directory</span>

<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> PublishCodeCoverageResults@1
  <span class="token key atrule">displayName</span><span class="token punctuation">:</span> <span class="token string">'Publish code coverage report'</span>
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">codeCoverageTool</span><span class="token punctuation">:</span> <span class="token string">'Cobertura'</span>
    <span class="token key atrule">summaryFileLocation</span><span class="token punctuation">:</span> <span class="token string">'$(Build.SourcesDirectory)/**/coverage.cobertura.xml'</span>
</code></pre></div><h2 id="package-and-deliver-your-code"><a href="#package-and-deliver-your-code" class="header-anchor">#</a> Package and deliver your code</h2> <p>After you've built and tested your app, you can upload the build output to Azure Pipelines or TFS, create and publish a NuGet package, or package the build output into a .zip file to be deployed to a web application.</p> <h3 id="publish-artifacts-to-azure-pipelines"><a href="#publish-artifacts-to-azure-pipelines" class="header-anchor">#</a> Publish artifacts to Azure Pipelines</h3> <p>To publish the output of your .NET <strong>build</strong>,</p> <ul><li>Run <code>dotnet publish --output $(Build.ArtifactStagingDirectory)</code> on CLI or add the DotNetCoreCLI@2 task with publish command.</li> <li>Publish the artifact by using Publish artifact task.</li></ul> <p>Add the following snippet to your <code>azure-pipelines.yml</code> file:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>

<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> publish
    <span class="token key atrule">publishWebProjects</span><span class="token punctuation">:</span> <span class="token boolean important">True</span>
    <span class="token key atrule">arguments</span><span class="token punctuation">:</span> <span class="token string">'--configuration $(BuildConfiguration) --output $(Build.ArtifactStagingDirectory)'</span>
    <span class="token key atrule">zipAfterPublish</span><span class="token punctuation">:</span> <span class="token boolean important">True</span>

<span class="token comment"># this code takes all the files in $(Build.ArtifactStagingDirectory) and uploads them as an artifact of your build.</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> PublishBuildArtifacts@1
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">pathtoPublish</span><span class="token punctuation">:</span> <span class="token string">'$(Build.ArtifactStagingDirectory)'</span> 
    <span class="token key atrule">artifactName</span><span class="token punctuation">:</span> <span class="token string">'myWebsiteName'</span>
</code></pre></div><blockquote><p>Note</p> <p>The <code>dotNetCoreCLI@2</code> task has a <code>publishWebProjects</code> input that is set to <strong>true</strong> by default. This publishes <em>all</em> web projects in your repo by default. You can find more help and information in the <a href="https://github.com/microsoft/azure-pipelines-tasks" target="_blank" rel="noopener noreferrer">open source task on GitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <p>To copy additional files to Build directory before publishing, use <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/utility/copy-files?view=azure-devops" target="_blank" rel="noopener noreferrer">Utility: copy files<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="publish-to-a-nuget-feed"><a href="#publish-to-a-nuget-feed" class="header-anchor">#</a> Publish to a NuGet feed</h3> <p>To create and publish a NuGet package, add the following snippet:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token comment"># ...</span>
<span class="token comment"># do this near the end of your pipeline in most cases</span>
<span class="token punctuation">-</span> <span class="token key atrule">script</span><span class="token punctuation">:</span> dotnet pack /p<span class="token punctuation">:</span>PackageVersion=$(version)  <span class="token comment"># define version variable elsewhere in your pipeline</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> NuGetAuthenticate@0
  <span class="token key atrule">input</span><span class="token punctuation">:</span>
    <span class="token key atrule">nuGetServiceConnections</span><span class="token punctuation">:</span> <span class="token string">'&lt;Name of the NuGet service connection&gt;'</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> NuGetCommand@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> push
    <span class="token key atrule">nuGetFeedType</span><span class="token punctuation">:</span> external
    <span class="token key atrule">publishFeedCredentials</span><span class="token punctuation">:</span> <span class="token string">'&lt;Name of the NuGet service connection&gt;'</span>
    <span class="token key atrule">versioningScheme</span><span class="token punctuation">:</span> byEnvVar
    <span class="token key atrule">versionEnvVar</span><span class="token punctuation">:</span> version
</code></pre></div><p>For more information about versioning and publishing NuGet packages, see <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/artifacts/nuget?view=azure-devops" target="_blank" rel="noopener noreferrer">publish to NuGet feeds<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h3 id="deploy-a-web-app"><a href="#deploy-a-web-app" class="header-anchor">#</a> Deploy a web app</h3> <p>To create a .zip file archive that's ready for publishing to a web app, add the following snippet:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">steps</span><span class="token punctuation">:</span>
<span class="token comment"># ...</span>
<span class="token comment"># do this after you've built your app, near the end of your pipeline in most cases</span>
<span class="token comment"># for example, you do this before you deploy to an Azure web app on Windows</span>
<span class="token punctuation">-</span> <span class="token key atrule">task</span><span class="token punctuation">:</span> DotNetCoreCLI@2
  <span class="token key atrule">inputs</span><span class="token punctuation">:</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> publish
    <span class="token key atrule">publishWebProjects</span><span class="token punctuation">:</span> <span class="token boolean important">True</span>
    <span class="token key atrule">arguments</span><span class="token punctuation">:</span> <span class="token string">'--configuration $(BuildConfiguration) --output $(Build.ArtifactStagingDirectory)'</span>
    <span class="token key atrule">zipAfterPublish</span><span class="token punctuation">:</span> <span class="token boolean important">True</span>
</code></pre></div><p>To publish this archive to a web app, see <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/targets/webapp?view=azure-devops" target="_blank" rel="noopener noreferrer">Azure Web Apps deployment<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="build-an-image-and-push-to-container-registry"><a href="#build-an-image-and-push-to-container-registry" class="header-anchor">#</a> Build an image and push to container registry</h2> <p>For your app, you can also <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/ecosystems/containers/build-image?view=azure-devops" target="_blank" rel="noopener noreferrer">build an image<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/ecosystems/containers/push-image?view=azure-devops" target="_blank" rel="noopener noreferrer">push it to a container registry<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="troubleshooting"><a href="#troubleshooting" class="header-anchor">#</a> Troubleshooting</h2> <p>If you're able to build your project on your development machine, but you're having trouble building it on Azure Pipelines or TFS, explore the following potential causes and corrective actions:</p> <ul><li><p>We don't install prerelease versions of the .NET Core SDK on Microsoft-hosted agents. After a new version of the .NET Core SDK is released, it can take a few weeks for us to roll it out to all the datacenters that Azure Pipelines runs on. You don't have to wait for us to finish this rollout. You can use the <strong>.NET Core Tool Installer</strong>, as explained in this guidance, to install the desired version of the .NET Core SDK on Microsoft-hosted agents.</p></li> <li><p>Check that the versions of the .NET Core SDK and runtime on your development machine match those on the agent. You can include a command-line script <code>dotnet --version</code> in your pipeline to print the version of the .NET Core SDK. Either use the <strong>.NET Core Tool Installer</strong>, as explained in this guidance, to deploy the same version on the agent, or update your projects and development machine to the newer version of the .NET Core SDK.</p></li> <li><p>You might be using some logic in the Visual Studio IDE that isn't encoded in your pipeline. Azure Pipelines or TFS runs each of the commands you specify in the tasks one after the other in a new process. Look at the logs from the Azure Pipelines or TFS build to see the exact commands that ran as part of the build. Repeat the same commands in the same order on your development machine to locate the problem.</p></li> <li><p>If you have a mixed solution that includes some .NET Core projects and some .NET Framework projects, you should also use the <strong>NuGet</strong> task to restore packages specified in <code>packages.config</code> files. Similarly, you should add <strong>MSBuild</strong> or <strong>Visual Studio Build</strong> tasks to build the .NET Framework projects.</p></li> <li><p>If your builds fail intermittently while restoring packages, either NuGet.org is having issues, or there are networking problems between the Azure datacenter and NuGet.org. These aren't under our control, and you might need to explore whether using Azure Artifacts with NuGet.org as an upstream source improves the reliability of your builds.</p></li> <li><p>Occasionally, when we roll out an update to the hosted images with a new version of the .NET Core SDK or Visual Studio, something might break your build. This can happen, for example, if a newer version or feature of the NuGet tool is shipped with the SDK. To isolate these problems, use the <strong>.NET Core Tool Installer</strong> task to specify the version of the .NET Core SDK that's used in your build.</p></li></ul> <h2 id="q-a"><a href="#q-a" class="header-anchor">#</a> Q&amp;A</h2> <h3 id="where-can-i-learn-more-about-azure-artifacts-and-the-tfs-package-management-service"><a href="#where-can-i-learn-more-about-azure-artifacts-and-the-tfs-package-management-service" class="header-anchor">#</a> Where can I learn more about Azure Artifacts and the TFS Package Management service?</h3> <p><a href="https://docs.microsoft.com/en-us/azure/devops/artifacts/?view=azure-devops" target="_blank" rel="noopener noreferrer">Package Management in Azure Artifacts and TFS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="where-can-i-learn-more-about-net-core-commands"><a href="#where-can-i-learn-more-about-net-core-commands" class="header-anchor">#</a> Where can I learn more about .NET Core commands?</h3> <p><a href="https://docs.microsoft.com/en-us/dotnet/core/tools/" target="_blank" rel="noopener noreferrer">.NET Core CLI tools<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="where-can-i-learn-more-about-running-tests-in-my-solution"><a href="#where-can-i-learn-more-about-running-tests-in-my-solution" class="header-anchor">#</a> Where can I learn more about running tests in my solution?</h3> <p><a href="https://docs.microsoft.com/en-us/dotnet/core/testing/" target="_blank" rel="noopener noreferrer">Unit testing in .NET Core projects<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="where-can-i-learn-more-about-tasks"><a href="#where-can-i-learn-more-about-tasks" class="header-anchor">#</a> Where can I learn more about tasks?</h3> <p><a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/tasks/?view=azure-devops" target="_blank" rel="noopener noreferrer">Build and release tasks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/shinyzhu/azureselected/edit/master/content/cloud-advocate/2020-05/build-test-and-deploy-dotnet-core-apps.md" target="_blank" rel="noopener noreferrer">Edit on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/2/2020, 3:53:07 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/azureselected/assets/js/app.8a0b7483.js" defer></script><script src="/azureselected/assets/js/2.8d021b4d.js" defer></script><script src="/azureselected/assets/js/33.ef0db925.js" defer></script><script src="/azureselected/assets/js/3.32c85e2e.js" defer></script><script src="/azureselected/assets/js/5.554b9b17.js" defer></script>
  </body>
</html>
